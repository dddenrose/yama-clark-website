(function(t){function e(e){for(var n,o,s=e[0],a=e[1],c=e[2],d=0,l=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);f&&f(e);while(l.length)l.shift()();return u.push.apply(u,c||[]),r()}function r(){for(var t,e=0;e<u.length;e++){for(var r=u[e],n=!0,o=1;o<r.length;o++){var s=r[o];0!==i[s]&&(n=!1)}n&&(u.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},o={app:0},i={app:0},u=[];function s(t){return a.p+"js/"+({"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp",Homerun:"Homerun",Login:"Login",OrderHistory:"OrderHistory",OrderList:"OrderList",ProductDetail:"ProductDetail",ProductList:"ProductList",Profile:"Profile",ShoppingList:"ShoppingList",SignUp:"SignUp"}[t]||t)+"."+{"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"4a871291",Homerun:"9455dada",Login:"488c91e7",OrderHistory:"ca4bc110",OrderList:"46707179",ProductDetail:"ab66b164",ProductList:"1ecd20bc",Profile:"496a94d2",ShoppingList:"45201da4",SignUp:"c99f3520"}[t]+".js"}function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(t){var e=[],r={"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":1,Homerun:1,Login:1,OrderHistory:1,OrderList:1,ProductDetail:1,ProductList:1,Profile:1,ShoppingList:1,SignUp:1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=new Promise((function(e,r){for(var n="css/"+({"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp",Homerun:"Homerun",Login:"Login",OrderHistory:"OrderHistory",OrderList:"OrderList",ProductDetail:"ProductDetail",ProductList:"ProductList",Profile:"Profile",ShoppingList:"ShoppingList",SignUp:"SignUp"}[t]||t)+"."+{"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"18c000ae",Homerun:"ee3ce5c7",Login:"ef44c302",OrderHistory:"ae3aa34f",OrderList:"98bbdf80",ProductDetail:"d32b57a6",ProductList:"b3cd3b39",Profile:"456d6c58",ShoppingList:"521d8ddc",SignUp:"83b58a0c"}[t]+".css",i=a.p+n,u=document.getElementsByTagName("link"),s=0;s<u.length;s++){var c=u[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===i))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){c=l[s],d=c.getAttribute("data-href");if(d===n||d===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||i,u=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=n,delete o[t],f.parentNode.removeChild(f),r(u)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var u=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=u);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,a.nc&&d.setAttribute("nonce",a.nc),d.src=s(t);var l=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(f);var r=i[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}i[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/yama-clark-website/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var f=d;u.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},3394:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e),r.d(e,"firebaseDb",(function(){return b})),r.d(e,"firebaseAuth",(function(){return y}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}}),r("router-view")],1)},i=[],u=r("5530"),s=r("2f62"),a={data:function(){return{}},methods:Object(u["a"])({},Object(s["b"])(["authAction","getAllProduct","setCurrentProduct"])),mounted:function(){this.authAction(),this.getAllProduct(),this.setCurrentProduct()}},c=a,d=(r("5c0b"),r("2877")),l=Object(d["a"])(c,o,i,!1,null,null,null),f=l.exports,p=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f"));n["a"].use(p["a"]);var h=[{path:"/",name:"homerun",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Homerun")]).then(r.bind(null,"f94e"))}},{path:"/productlist",name:"productlist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ProductList")]).then(r.bind(null,"96fc"))}},{path:"/productdetail/:id",name:"productdetail",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ProductDetail")]).then(r.bind(null,"5f47"))}},{path:"/shoppinglist",name:"shoppinglist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ShoppingList")]).then(r.bind(null,"697f"))}},{path:"/orderlist",name:"orderlist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("OrderList")]).then(r.bind(null,"bf4b"))}},{path:"/login",name:"login",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Login")]).then(r.bind(null,"a55b"))}},{path:"/signup",name:"signup",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("SignUp")]).then(r.bind(null,"5c9c"))}},{path:"/orderhistory",name:"orderhistory",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("OrderHistory")]).then(r.bind(null,"3ed5"))}},{path:"/profile",name:"profile",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Profile")]).then(r.bind(null,"c66d"))}}],m=new p["a"]({routes:h}),g=m;r("ac1f"),r("841c"),r("99af"),r("d81d"),r("b64b"),r("159b"),r("caad"),r("2532"),r("a434"),r("4e82"),r("a9e3");n["a"].use(s["a"]);var L=new s["a"].Store({state:{user:null,error:null,userList:[],allProduct:[],tagPrdocut:[],currentProduct:[],orderHistory:[],loading:!1,tag:[],search:[],chat:[],chatList:[],showChat:!1,chatError:null,bigToSmall:!1,showNav:!1},mutations:{setUser:function(t,e){t.user=e},setError:function(t,e){t.error=e},setUserList:function(t,e){t.userList=e},setAllProduct:function(t,e){t.allProduct=e},setCurrentProduct:function(t,e){t.currentProduct=e},setOrderHistory:function(t,e){t.orderHistory=e},setLoading:function(t,e){t.loading=e},setTag:function(t,e){t.tag=e},setSearch:function(t,e){t.search=e},setChat:function(t,e){t.chat=e},setChatList:function(t,e){t.chatList=e},setShowChat:function(t,e){t.showChat=e},setChatError:function(t,e){t.chatError=e},setTagPrdocut:function(t,e){t.tagPrdocut=e},setBigToSmall:function(t,e){t.bigToSmall=e},setShowNav:function(t,e){t.showNav=e}},actions:{authAction:function(t){var e=t.commit,r=t.dispatch;e("setLoading",!0),y.onAuthStateChanged((function(t){t?(e("setUser",t),r("getUserList"),r("getOrderHistory"),r("getChat"),e("setChatError",null)):(e("setUser",null),e("setUserList",null),e("setLoading",!1),e("setChatList",[]),e("setShowChat",!1))}))},signUpAction:function(t,e){var r=t.commit;y.createUserWithEmailAndPassword(e.email,e.password).then((function(){g.push({name:"profile"})})).catch((function(t){alert(t),r("setError",t.message)}))},signInAction:function(t,e){var r=t.commit;y.signInWithEmailAndPassword(e.email,e.password).then((function(){g.push({name:"profile"})})).catch((function(t){r("setError",t.message),alert(t.message)}))},signOutAction:function(t){var e=t.commit;y.signOut().then((function(){e("setUser",null),e("setShowNav",!1),alert("You have already logout."),g.push({name:"homerun"}).catch((function(){}))})).catch((function(t){e("setError",t.message)}))},forgetPassword:function(t){var e=t.payload;y.sendPasswordResetEmail(e.email).then((function(){alert("Check your registered email to reset the password!")})).catch((function(t){alert(t)}))},addProduct:function(t,e){var r=t.state,n=e.product;if(r.user){var o=[];o.push(n);var i=y.currentUser.uid,u=r.userList,s=!1;if(u)for(var a=0;a<u.length;a++)u[a].imagePath===o[0].imagePath&&(s=!0);if(null==r.userList)b.ref("users").child(r.user.uid).set(o);else if(s)for(var c=0;c<u.length;c++)u[c].imagePath===o[0].imagePath&&function(){var t=b.ref("users/"+i+"/"+c);t.once("value",(function(e){var r=e.val(),n={count:r.count+1};t.update(n)}))}();else{var d=u.concat(o);b.ref("users").child(r.user.uid).set(d)}}else alert("You can continue to shop after login.")},addProductDetail:function(t){var e=t.state;b.ref("users").child(e.user.uid).push(e.currentProduct)},getUserList:function(t){var e=t.state,r=t.commit;return b.ref("users/"+e.user.uid).on("value",(function(t){r("setUserList",t.val()),r("setLoading",!1)}))},getAllProduct:function(t){var e=t.state,r=t.commit;if(!(e.tag.length>=1))return b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));var n=[];b.ref("productList/0").on("value",(function(t){var o=t.val(),i=Object.keys(o).map((function(t){return o[t]}));i.forEach((function(t){e.tag.every((function(e){return t.tag.includes(e)}))&&n.push(t)})),r("setAllProduct",n)}))},searchlProduct:function(t){var e=t.state,r=t.commit,n=[];if(""===e.search)return b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));b.ref("productList/0").on("value",(function(t){var o=t.val(),i=Object.keys(o).map((function(t){return o[t]}));i.forEach((function(t){t.tag.toLowerCase().includes(e.search.toLowerCase())&&n.push(t)})),r("setAllProduct",n)}))},deleteProduct:function(t,e){var r=t.state,n=e.index;r.userList.splice(n,1),b.ref("users").child(r.user.uid).set(r.userList)},addCount:function(t,e){var r=t.getters,n=e.item,o=e.index,i=y.currentUser.uid,u=b.ref("users/"+i+"/"+o),s={count:n.count+1};u.update(s),console.log(r)},minusCount:function(t,e){var r=t.getters,n=e.item,o=e.index,i=y.currentUser.uid,u=b.ref("users/"+i+"/"+o);if(n.count>=2){var s={count:n.count-1};u.update(s)}console.log(r)},routerToDetail:function(t,e){var r=t.dispatch,n=e.index;g.push({name:"productdetail",params:{id:n}}),r("setCurrentProduct")},setCurrentProduct:function(t){var e=t.commit,r=g.currentRoute.params.id;if(r)return b.ref("productList/0").on("value",(function(t){var n=Object.keys(t.val()).map((function(e){return t.val()[e]}));n.forEach((function(t){t.productId===r&&e("setCurrentProduct",t)}))}))},getOrderHistory:function(t){var e=t.state,r=t.commit;return b.ref("history/"+e.user.uid).on("value",(function(t){r("setOrderHistory",t.val())}))},confirmOrder:function(t){var e=t.state;if(null!=e.orderHistory){var r=e.orderHistory.concat(e.userList);b.ref("history").child(e.user.uid).set(r);var n=y.currentUser.uid,o=b.ref("users/"+n);o.remove(),g.push({name:"orderhistory"})}else{b.ref("history").child(e.user.uid).set(e.userList);var i=y.currentUser.uid,u=b.ref("users/"+i);u.remove(),g.push({name:"orderhistory"})}},clearHistory:function(){var t=y.currentUser.uid,e=b.ref("history/"+t);e.remove()},bigToSmall:function(t){var e=t.state,r=t.commit,n=!e.bigToSmall;if(r("setBigToSmall",n),!e.bigToSmall)return b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));n.sort((function(t,e){return e.price-t.price})),r("setAllProduct",n)}))},smallToBig:function(t){var e=t.state,r=t.commit,n=!e.bigToSmall;if(r("setBigToSmall",n),!e.bigToSmall)return b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));b.ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));n.sort((function(t,e){return t.price-e.price})),r("setAllProduct",n)}))},chatEnter:function(t){var e=t.state,r=t.commit;if(e.user){var n=y.currentUser.uid,o=b.ref("chat/"+n),i=o.push().key;o.child(i).set({chat:e.chat,time:Date.now()}),e.chat=""}else r("setChatError","You have to login")},getChat:function(t){var e=t.state,r=t.commit;return b.ref("chat/"+e.user.uid).on("value",(function(t){if(t.val()){var e=Object.keys(t.val()).map((function(e){return t.val()[e]}));e.reverse(),r("setChatList",e)}}))},deleteChat:function(t){var e=t.commit,r=y.currentUser.uid,n=b.ref("chat/"+r);n.remove(),e("setChatList",[])}},getters:{getUser:function(t){return t.user},isUserAuth:function(t){return!!t.user},getError:function(t){return t.error},totalPrice:function(t){var e=0;for(var r in t.userList)e+=Number(t.userList[r].price*t.userList[r].count);return e},shoppingCount:function(t){if(t.userList){var e=Object.keys(t.userList).map((function(e){return t.userList[e]})),r=e.length;return r}},tempUserList:function(t){if(null===t.userList){var e=[0];return e}var r=Object.keys(t.userList).map((function(e){return t.userList[e]}));return r}}}),v=(r("15f5"),r("7051"),r("4f60"));r("256a"),r("1862"),r("2979"),r("3394");n["a"].config.productionTip=!1;var P={apiKey:"AIzaSyAbYLUVJYoITGNvgeEJiLWKwlvEZEgsn7M",authDomain:"yama-website.firebaseapp.com",databaseURL:"https://yama-website-default-rtdb.firebaseio.com",projectId:"yama-website",storageBucket:"yama-website.appspot.com",messagingSenderId:"1094650287749",appId:"1:1094650287749:web:b011ea45db8ec625e5bbec",measurementId:"G-6TTRYFGB6X"};v["a"].initializeApp(P);var b=v["a"].database(),y=v["a"].auth();new n["a"]({router:g,store:L,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"9c0c":function(t,e,r){}});
//# sourceMappingURL=app.f9152cd7.js.map