(function(t){function e(e){for(var n,o,u=e[0],s=e[1],c=e[2],d=0,l=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);f&&f(e);while(l.length)l.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},i={app:0},a=[];function u(t){return s.p+"js/"+({"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp",Homerun:"Homerun",Login:"Login",OrderHistory:"OrderHistory",OrderList:"OrderList",ProductDetail:"ProductDetail",ProductList:"ProductList",Profile:"Profile",ShoppingList:"ShoppingList",SignUp:"SignUp"}[t]||t)+"."+{"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"24f388d3",Homerun:"c6797750",Login:"743ba528",OrderHistory:"72fa254e",OrderList:"edd4f6ce",ProductDetail:"7a94f77b",ProductList:"4dab817a",Profile:"0cb3b0ac",ShoppingList:"b43fb442",SignUp:"ff4a4495"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r={"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":1,Homerun:1,Login:1,OrderHistory:1,OrderList:1,ProductDetail:1,ProductList:1,Profile:1,ShoppingList:1,SignUp:1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=new Promise((function(e,r){for(var n="css/"+({"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp",Homerun:"Homerun",Login:"Login",OrderHistory:"OrderHistory",OrderList:"OrderList",ProductDetail:"ProductDetail",ProductList:"ProductList",Profile:"Profile",ShoppingList:"ShoppingList",SignUp:"SignUp"}[t]||t)+"."+{"Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp":"9055b4d4",Homerun:"bfaf9525",Login:"c78ef236",OrderHistory:"cff153a2",OrderList:"095533d9",ProductDetail:"423ccae7",ProductList:"cc2805d4",Profile:"1a435510",ShoppingList:"4438e484",SignUp:"2fcb1e93"}[t]+".css",i=s.p+n,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var c=a[u],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===i))return e()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){c=l[u],d=c.getAttribute("data-href");if(d===n||d===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||i,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete o[t],f.parentNode.removeChild(f),r(a)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=u(t);var l=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(f);var r=i[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}i[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/yama-clark-website/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var f=d;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},3394:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}}),r("router-view")],1)},i=[],a=r("5530"),u=r("2f62"),s={data:function(){return{}},methods:Object(a["a"])({},Object(u["b"])(["authAction","getAllProduct","setCurrentProduct"])),mounted:function(){this.authAction(),this.getAllProduct(),this.setCurrentProduct()}},c=s,d=(r("5c0b"),r("2877")),l=Object(d["a"])(c,o,i,!1,null,null,null),f=l.exports,p=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f"));n["a"].use(p["a"]);var h=[{path:"/",name:"homerun",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Homerun")]).then(r.bind(null,"f94e"))}},{path:"/productlist",name:"productlist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ProductList")]).then(r.bind(null,"96fc"))}},{path:"/productdetail/:id",name:"productdetail",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ProductDetail")]).then(r.bind(null,"5f47"))}},{path:"/shoppinglist",name:"shoppinglist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("ShoppingList")]).then(r.bind(null,"697f"))}},{path:"/orderlist",name:"orderlist",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("OrderList")]).then(r.bind(null,"bf4b"))}},{path:"/login",name:"login",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Login")]).then(r.bind(null,"a55b"))}},{path:"/signup",name:"signup",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("SignUp")]).then(r.bind(null,"5c9c"))}},{path:"/orderhistory",name:"orderhistory",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("OrderHistory")]).then(r.bind(null,"3ed5"))}},{path:"/profile",name:"profile",component:function(){return Promise.all([r.e("Homerun~Login~OrderHistory~OrderList~ProductDetail~ProductList~Profile~ShoppingList~SignUp"),r.e("Profile")]).then(r.bind(null,"c66d"))}}],m=new p["a"]({routes:h}),g=m,L=(r("ac1f"),r("841c"),r("99af"),r("d81d"),r("b64b"),r("159b"),r("caad"),r("2532"),r("a434"),r("b0c0"),r("4e82"),r("a9e3"),r("4f60"));r("256a"),r("1862"),r("2979");n["a"].use(u["a"]);var v=new u["a"].Store({state:{user:null,error:null,userList:[],allProduct:[],tagPrdocut:[],currentProduct:[],orderHistory:[],loading:!1,tag:[],search:[],chat:[],chatList:[],showChat:!1,chatError:null,bigToSmall:!1,showNav:!1},mutations:{setUser:function(t,e){t.user=e},setError:function(t,e){t.error=e},setUserList:function(t,e){t.userList=e},setAllProduct:function(t,e){t.allProduct=e},setCurrentProduct:function(t,e){t.currentProduct=e},setOrderHistory:function(t,e){t.orderHistory=e},setLoading:function(t,e){t.loading=e},setTag:function(t,e){t.tag=e},setSearch:function(t,e){t.search=e},setChat:function(t,e){t.chat=e},setChatList:function(t,e){t.chatList=e},setShowChat:function(t,e){t.showChat=e},setChatError:function(t,e){t.chatError=e},setTagPrdocut:function(t,e){t.tagPrdocut=e},setBigToSmall:function(t,e){t.bigToSmall=e},setShowNav:function(t,e){t.showNav=e}},actions:{authAction:function(t){var e=t.commit,r=t.dispatch;e("setLoading",!0),L["a"].auth().onAuthStateChanged((function(t){t?(e("setUser",t),r("getUserList"),r("getOrderHistory"),r("getChat"),e("setChatError",null)):(e("setUser",null),e("setUserList",null),e("setLoading",!1),e("setChatList",[]),e("setShowChat",!1))}))},signUpAction:function(t,e){var r=this,n=t.commit;L["a"].auth().createUserWithEmailAndPassword(e.email,e.password).then((function(){r.$router.push("/profile")})).catch((function(t){alert(t),n("setError",t.message)}))},signInAction:function(t,e){var r=t.commit;L["a"].auth().signInWithEmailAndPassword(e.email,e.password).then((function(){g.push({name:"profile"})})).catch((function(t){r("setError",t.message),alert(t.message)}))},signOutAction:function(t){var e=t.commit;L["a"].auth().signOut().then((function(){e("setUser",null),e("setShowNav",!1),alert("You have already logout."),g.push({name:"homerun"}).catch((function(){}))})).catch((function(t){e("setError",t.message)}))},forgetPassword:function(t){var e=t.payload;L["a"].auth().sendPasswordResetEmail(e.email).then((function(){alert("Check your registered email to reset the password!")})).catch((function(t){alert(t)}))},addProduct:function(t,e){var r=t.state,n=e.product;if(r.user){var o=[];o.push(n);var i=L["a"].auth().currentUser.uid,a=r.userList,u=!1;if(a)for(var s=0;s<a.length;s++)a[s].imagePath===o[0].imagePath&&(u=!0);if(null==r.userList)L["a"].database().ref("users").child(r.user.uid).set(o);else if(u)for(var c=0;c<a.length;c++)a[c].imagePath===o[0].imagePath&&function(){var t=L["a"].database().ref("users/"+i+"/"+c);t.once("value",(function(e){var r=e.val(),n={count:r.count+1};t.update(n)}))}();else{var d=a.concat(o);L["a"].database().ref("users").child(r.user.uid).set(d)}}else alert("You can continue to shop after login.")},addProductDetail:function(t){var e=t.state;L["a"].database().ref("users").child(e.user.uid).push(e.currentProduct)},getUserList:function(t){var e=t.state,r=t.commit;return L["a"].database().ref("users/"+e.user.uid).on("value",(function(t){r("setUserList",t.val()),r("setLoading",!1)}))},getAllProduct:function(t){var e=t.state,r=t.commit;if(!(e.tag.length>=1))return L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));var n=[];L["a"].database().ref("productList/0").on("value",(function(t){var o=t.val(),i=Object.keys(o).map((function(t){return o[t]}));i.forEach((function(t){e.tag.every((function(e){return t.tag.includes(e)}))&&n.push(t)})),r("setAllProduct",n)}))},searchlProduct:function(t){var e=t.state,r=t.commit,n=[];if(""===e.search)return L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));L["a"].database().ref("productList/0").on("value",(function(t){var o=t.val(),i=Object.keys(o).map((function(t){return o[t]}));i.forEach((function(t){t.tag.toLowerCase().includes(e.search.toLowerCase())&&n.push(t)})),r("setAllProduct",n)}))},deleteProduct:function(t,e){var r=t.state,n=e.index;r.userList.splice(n,1),L["a"].database().ref("users").child(r.user.uid).set(r.userList)},addCount:function(t,e){var r=t.getters,n=e.item,o=e.index,i=L["a"].auth().currentUser.uid,a=L["a"].database().ref("users/"+i+"/"+o),u={count:n.count+1};a.update(u),console.log(r)},minusCount:function(t,e){var r=t.getters,n=e.item,o=e.index,i=L["a"].auth().currentUser.uid,a=L["a"].database().ref("users/"+i+"/"+o);if(n.count>=2){var u={count:n.count-1};a.update(u)}console.log(r)},routerToDetail:function(t,e){var r=t.state,n=t.dispatch,o=e.index,i=g.currentRoute.name;"productlist"!=i&&"shoppinglist"!=i&&"orderlist"!=i&&"homerun"!=i?r.currentProduct.productId!=o&&(g.push({name:"productdetail",params:{id:o}}),n("setCurrentProduct")):(g.push({name:"productdetail",params:{id:o}}),n("setCurrentProduct"))},setCurrentProduct:function(t){var e=t.commit,r=g.currentRoute.params.id;if(r)return L["a"].database().ref("productList/0").on("value",(function(t){var n=Object.keys(t.val()).map((function(e){return t.val()[e]}));n.forEach((function(t){t.productId===r&&e("setCurrentProduct",t)}))}))},getOrderHistory:function(t){var e=t.state,r=t.commit;return L["a"].database().ref("history/"+e.user.uid).on("value",(function(t){r("setOrderHistory",t.val())}))},confirmOrder:function(t){var e=t.state;if(null!=e.orderHistory){var r=e.orderHistory.concat(e.userList);L["a"].database().ref("history").child(e.user.uid).set(r);var n=L["a"].auth().currentUser.uid,o=L["a"].database().ref("users/"+n);o.remove(),g.push({name:"orderhistory"})}else{L["a"].database().ref("history").child(e.user.uid).set(e.userList);var i=L["a"].auth().currentUser.uid,a=L["a"].database().ref("users/"+i);a.remove(),g.push({name:"orderhistory"})}},clearHistory:function(){var t=L["a"].auth().currentUser.uid,e=L["a"].database().ref("history/"+t);e.remove()},bigToSmall:function(t){var e=t.state,r=t.commit,n=!e.bigToSmall;if(r("setBigToSmall",n),!e.bigToSmall)return L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));n.sort((function(t,e){return e.price-t.price})),r("setAllProduct",n)}))},smallToBig:function(t){var e=t.state,r=t.commit,n=!e.bigToSmall;if(r("setBigToSmall",n),!e.bigToSmall)return L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));r("setAllProduct",n)}));L["a"].database().ref("productList/0").on("value",(function(t){var e=t.val(),n=Object.keys(e).map((function(t){return e[t]}));n.sort((function(t,e){return t.price-e.price})),r("setAllProduct",n)}))},chatEnter:function(t){var e=t.state,r=t.commit;if(e.user){var n=L["a"].auth().currentUser.uid,o=L["a"].database().ref("chat/"+n),i=o.push().key;""!==e.chat&&o.child(i).set({chat:e.chat,time:Date.now()}),e.chat=""}else r("setChatError","You have to login")},getChat:function(t){var e=t.state,r=t.commit;return L["a"].database().ref("chat/"+e.user.uid).on("value",(function(t){if(t.val()){var e=Object.keys(t.val()).map((function(e){return t.val()[e]}));e.reverse(),r("setChatList",e)}}))},deleteChat:function(t){var e=t.commit,r=L["a"].auth().currentUser.uid,n=L["a"].database().ref("chat/"+r);n.remove(),e("setChatList",[])}},getters:{getUser:function(t){return t.user},isUserAuth:function(t){return!!t.user},getError:function(t){return t.error},totalPrice:function(t){var e=0;for(var r in t.userList)e+=Number(t.userList[r].price*t.userList[r].count);return e},shoppingCount:function(t){if(t.userList){var e=Object.keys(t.userList).map((function(e){return t.userList[e]})),r=e.length;return r}},tempUserList:function(t){if(null===t.userList){var e=[0];return e}var r=Object.keys(t.userList).map((function(e){return t.userList[e]}));return r}}});r("15f5"),r("7051"),r("3394");n["a"].config.productionTip=!1;var P={apiKey:"AIzaSyAbYLUVJYoITGNvgeEJiLWKwlvEZEgsn7M",authDomain:"yama-website.firebaseapp.com",databaseURL:"https://yama-website-default-rtdb.firebaseio.com",projectId:"yama-website",storageBucket:"yama-website.appspot.com",messagingSenderId:"1094650287749",appId:"1:1094650287749:web:b011ea45db8ec625e5bbec",measurementId:"G-6TTRYFGB6X"};L["a"].initializeApp(P),new n["a"]({router:g,store:v,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"9c0c":function(t,e,r){}});
//# sourceMappingURL=app.311fe8c7.js.map